<div class="container-recover">
  <div class="recover-container">
    <div class="recover-form-container">
      <div class="recover-form">
        <h2>Reestablecer contraseña</h2>

        <!-- Vista de éxito -->
        <div *ngIf="successMessage; else formTpl" class="success-block" aria-live="polite">
          <div class="success-message">{{ successMessage }}</div>
          <p class="back-login">
            <a class="back-login" href="/">Ir a iniciar sesión</a>
          </p>
        </div>

        <!-- Formulario (si aún no hay éxito) -->
        <ng-template #formTpl>
          <form (ngSubmit)="onSubmit()" #recoverForm="ngForm" novalidate>
            <input
              type="password"
              name="newPassword"
              [(ngModel)]="newPassword"
              required
              placeholder="Nueva contraseña"
            />
            <input
              type="password"
              name="confirmPassword"
              [(ngModel)]="confirmPassword"
              required
              placeholder="Confirmar nueva contraseña"
            />
            <button type="submit" [disabled]="saving || !recoverForm.valid">
              {{ saving ? 'Guardando…' : 'Confirmar' }}
            </button>

            <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
          </form>
        </ng-template>
      </div>
    </div>
  </div>
  <div class="login-img"></div>
</div>
