<!-- history.component.html -->
<div class="history-wrapper">
    <h2 class="page-title">Historial</h2>
    <p class="subtitle">Tu historial de presentaciones</p>
    <p class="description">Aquí encontrarás un resumen de todas tus presentaciones anteriores, junto con su análisis y comentarios.</p>

    <div class="table-container">
        <mat-table [dataSource]="dataSource" matSort class="mat-elevation-z1 custom-table">
            <!-- Presentation Column -->
            <ng-container matColumnDef="presentation">
            <mat-header-cell *matHeaderCellDef mat-sort-header>Presentación</mat-header-cell>
            <mat-cell *matCellDef="let element">{{ element.title }}</mat-cell>
            </ng-container>

            <!-- Date Column -->
            <ng-container matColumnDef="date">
            <mat-header-cell *matHeaderCellDef mat-sort-header>Fecha</mat-header-cell>
            <mat-cell *matCellDef="let element">{{ element.date }}</mat-cell>
            </ng-container>

            <!-- Emotion Column -->
            <ng-container matColumnDef="emotion">
            <mat-header-cell *matHeaderCellDef mat-sort-header>Emoción dominante</mat-header-cell>
            <mat-cell *matCellDef="let element">{{ element.emotion }}</mat-cell>
            </ng-container>

            <!-- Action Column -->
            <ng-container matColumnDef="action">
            <mat-header-cell *matHeaderCellDef>Acción</mat-header-cell>
            <mat-cell *matCellDef="let element">
                <button mat-raised-button color="accent" class="view-report-btn" (click)="goToFeedback(element.id)">
                    <span class="btn-text-report">Ver informe</span>
                </button>

            </mat-cell>
            </ng-container>

            <!-- Favorites Column -->
            <!-- <ng-container matColumnDef="favorite">
            <mat-header-cell *matHeaderCellDef>Favoritos</mat-header-cell>
            <mat-cell *matCellDef="let element">
                <mat-icon
                    class="star-icon"
                    [ngClass]="{ 'favorite-true': element.favorite }"
                    (click)="toggleFavorite(element)">
                    {{ element.favorite ? 'star' : 'star_border' }}
                </mat-icon>

            </mat-cell>
            </ng-container> -->

            <!-- Listen Column -->
             <ng-container matColumnDef="listen">
                <mat-header-cell *matHeaderCellDef>Escuchar</mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <button mat-raised-button color="primary" class="listen-btn" (click)="goToAudioPlayer(element.id)">
                        <mat-icon>play_arrow</mat-icon>
                        <span class="btn-text-listen">Reproducir</span>
                    </button>
                </mat-cell>
            </ng-container>


            <!-- Delete Column -->
             <ng-container matColumnDef="delete">
                <mat-header-cell *matHeaderCellDef>Eliminar</mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <button mat-icon-button color="warn" (click)="deletePresentation(element.id)">
                        <mat-icon>delete</mat-icon>
                    </button>
                </mat-cell>
            </ng-container>


            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
        </mat-table>
    </div>
    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
</div>
