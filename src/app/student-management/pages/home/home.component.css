:root{
  --card-bg: #fff;
  --card-radius: 16px;
  --shadow: 0 4px 16px rgba(15,23,42,.06);
}

/* ===== Layout general ===== */
.home-container{ padding:1.25rem 1.5rem 2.25rem; display:grid; gap:1.25rem; }

/* Header */
.header-section{ display:flex; justify-content:space-between; align-items:center; gap:1rem; flex-wrap:wrap; }
.header-title h2{ margin:0; }
.header-title p{ margin:.25rem 0 0; color:#6b7280; }

/* Grid */
.dashboard{ display:grid; grid-template-columns:repeat(12, minmax(0,1fr)); gap:20px; }

/* Cards */
.card{ background:var(--card-bg); border-radius:var(--card-radius); box-shadow:var(--shadow); padding:1rem 1rem 1.2rem; border:1px solid #eef2f7; }
.card h4{ margin:.25rem 0 0; letter-spacing:.2px; }

/* ===== Título de tarjeta con ayuda ===== */
.card-title-row{
  display:flex; align-items:center; justify-content:space-between; gap:.5rem; margin-bottom:.75rem;
}
.help-wrap{ position:relative; user-select:none; }
.help-icon{
  width:22px; height:22px; display:inline-flex; align-items:center; justify-content:center;
  border-radius:999px; font-weight:800; font-size:.85rem; cursor:pointer;
  color:#0f172a; background:#eef2f7;
}
.help-icon:hover{ background:#e2e8f0; }
.help-popover{
  position:absolute; right:0; top:28px; width:280px; z-index:10;
  background:#fff; border:1px solid #e5e7eb; border-radius:12px; box-shadow:0 8px 24px rgba(15,23,42,.12);
  padding:.75rem .9rem;
}
.pop-title{ font-weight:800; margin-bottom:.35rem; }
.pop-list{ margin:0; padding-left:1rem; display:grid; gap:.25rem; font-size:.92rem; color:#374151; }
.pop-foot{ margin-top:.45rem; font-size:.8rem; color:#6b7280; }
.pop-list .up{ color:#16a34a; font-weight:700; }
.pop-list .down{ color:#ef4444; font-weight:700; }

/* ===== Charts ===== */
.chart-box{ height:260px; }
.chart-box.sm{ height:200px; } /* compacto para el gauge */
.chart-box canvas{ width:100% !important; height:100% !important; display:block; }

/* ===== Gauge (overlay central) ===== */
.gauge-wrap{ position:relative; }
.gauge-center{
  position:absolute; inset:0; display:flex; flex-direction:column;
  align-items:center; justify-content:center; pointer-events:none;
}
.gauge-center .level{ font-weight:800; font-size:1.1rem; }
.gauge-center .points{ font-weight:900; font-size:2.4rem; line-height:1; margin-top:.25rem; }
.gauge-center .unit{ letter-spacing:.5px; color:#6b7280; font-weight:700; font-size:.8rem; }

/* ===== Listado últimas ===== */
.list{ display:grid; grid-template-columns:1.5fr 1fr 1fr; gap:12px; align-items:center; }
.item{ display:contents; }
.item .thumb{ display:flex; align-items:center; gap:10px; }
.item img{ width:56px; height:40px; object-fit:cover; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,.08); }
.item .title{ font-weight:600; }
.item .date{ color:#6b7280; font-size:.92rem; }
.item .cta{ text-align:right; }
.item .cta a{ text-decoration:none; font-weight:600; color:#2B647F; }
.list-header{ display:grid; grid-template-columns:1.5fr 1fr 1fr; gap:12px; color:#64748b; font-size:.9rem; margin-bottom:.5rem; }

/* ===== Spans ===== */
.col-8{ grid-column:span 8; } .col-4{ grid-column:span 4; } .col-12{ grid-column:span 12; }

/* ===== Botón ===== */
.new-presentation{
  background:#00bfa6; border:none; padding:10px 16px; color:#fff; border-radius:10px;
  box-shadow:0 2px 5px rgba(0,0,0,.15); cursor:pointer;
}

/* ===== KPIs ===== */
.kpis{ display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:16px; margin-top:4px; }
.kpi{ background:#fff; border:1px solid #eef2f7; border-radius:14px; box-shadow:var(--shadow); padding:12px 14px; }
.kpi .label{ color:#64748b; font-size:.85rem; }
.kpi .value{ font-weight:800; font-size:1.2rem; }

/* ===== Gauge (pequeña nota bajo el % global) ===== */
.gauge-center .subnote{
  margin-top:.25rem;
  font-size:.85rem;
  color:#6b7280;
  font-weight:600;
  letter-spacing:.2px;
}

/* barra de pasos debajo del gauge para ver el nivel a simple vista */
.level-steps{
  display:flex; gap:6px; margin-top:6px; padding:0 .25rem;
}
.level-steps .step{
  flex:1; height:6px; border-radius:999px; background:#e5e7eb;
  box-shadow:inset 0 0 0 1px rgba(0,0,0,.05);
}
.level-steps .step.active{ background:#14b8a6; }

/* Asegura que el contenido flotante no se recorte */
.kpi { position: relative; overflow: visible; }

/* Fila del título + ícono a la derecha */
.kpi-emotion .kpi-header {
  display: flex;
  align-items: center;
  justify-content: space-between;   /* empuja el ? a la derecha */
  gap: 8px;
}

/* Ícono ayuda */
.help-wrap {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  border-radius: 9999px;
  background: #eef2f7;   /* similar al de la rueda */
  color: #334155;
  cursor: pointer;
  user-select: none;
  flex: 0 0 auto;
}
.help-icon { font-weight: 700; font-size: 12px; line-height: 1; }

/* Popover */
.help-popover {
  position: absolute;
  top: 120%;
  right: 0;              /* se ancla al borde derecho del label */
  width: 320px;
  max-width: 80vw;
  background: #fff;
  border-radius: 12px;
  padding: 12px 14px;
  box-shadow: 0 10px 25px rgba(2, 8, 23, 0.15);
  z-index: 30;
}

.pop-title { font-weight: 700; margin-bottom: 8px; }
.pop-list  { margin: 0; padding-left: 16px; }
.pop-list li { margin: 6px 0; }

/* --- Override solo para el KPI "Emoción dominante..." --- */
.kpi-emotion .kpi-header .help-popover {
  left: 0;          /* abrir hacia la DERECHA del icono */
  right: auto;      /* anula right:0 del global */
  top: 120%;        /* separadito del icono */
  width: 320px;
  max-width: min(320px, calc(100vw - 56px)); /* evita desborde en pantallas chicas */
}

.bar-controls { display:flex; gap:.5rem; align-items:center; }
.bar-controls .range { display:flex; gap:.35rem; align-items:center; }
.bar-controls select, .bar-controls input[type="date"] {
  padding:.35rem .5rem; border:1px solid #e5e7eb; border-radius:8px;
  font-size:.9rem; background:#fff;
}

.period-controls { display:flex; align-items:center; gap:8px; }
.period-select, .date-input {
  appearance: none;
  border:1px solid #e5e7eb;
  background:#fff;
  padding:8px 12px;
  border-radius:10px;
  font-weight:600;
  box-shadow:0 2px 5px rgba(0,0,0,.06);
}
.period-select { background-image: linear-gradient(45deg, transparent 50%, #64748b 50%), linear-gradient(135deg, #64748b 50%, transparent 50%), linear-gradient(to right, #fff, #fff); background-position: calc(100% - 16px) calc(50% - 3px), calc(100% - 11px) calc(50% - 3px), calc(100% - 2.4em) 0.5em; background-size: 5px 5px, 5px 5px, 1px 1.5em; background-repeat: no-repeat; padding-right: 36px; }
.date-dash { color:#94a3b8; font-weight:700; }


/* ===== Responsive ===== */
@media (max-width:1024px){
  .dashboard{ grid-template-columns:1fr; }
  .col-8,.col-4,.col-12{ grid-column:span 1; }
  .chart-box{ height:220px; }
  .list,.list-header{ grid-template-columns:1.2fr .8fr .8fr; }
}
@media (max-width:640px){
  .home-container{ padding:1rem; }
  .list,.list-header{ grid-template-columns:1fr .8fr; }
  .item .cta{ display:none; }
}
